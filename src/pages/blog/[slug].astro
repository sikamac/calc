---
import { getCollection } from 'astro:content';
import BaseLayout from '../../layouts/BaseLayout.astro';
import Header from '../../components/layout/Header.astro';
import Footer from '../../components/layout/Footer.astro';

export async function getStaticPaths() {
  const blogEntries = await getCollection('news');
  return blogEntries.map(entry => ({
    params: { slug: entry.slug },
    props: { entry },
  }));
}

const { entry } = Astro.props;
const { Content } = await entry.render();

const title = `${entry.data.title} | GIST POINT`;
const description = entry.data.description;
---

<BaseLayout 
  title={title}
  description={description}
  url={Astro.url}
  image={entry.data.image}
>
  <Header />
  <main class="py-16 bg-white">
    <article class="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8">
      <!-- Header -->
      <header class="mb-12 pb-8 border-b border-gray-200">
        <div class="flex items-center gap-3 mb-6">
          <span class="px-3 py-1 bg-accent/10 text-accent text-sm font-semibold rounded-full">
            {entry.data.category}
          </span>
          <time class="text-gray-500 text-sm">
            {new Date(entry.data.date).toLocaleDateString('es-AR', {
              year: 'numeric',
              month: 'long',
              day: 'numeric'
            })}
          </time>
        </div>
        
        <h1 class="text-4xl md:text-5xl font-bold text-gray-900 mb-6 leading-tight">
          {entry.data.title}
        </h1>
        
        <p class="text-xl text-gray-600 mb-6">
          {entry.data.description}
        </p>
        
        <div class="flex items-center justify-between">
          <div class="flex items-center">
            <div class="bg-primary text-white px-3 py-1 rounded-full text-sm font-medium">
              {entry.data.author}
            </div>
          </div>
          
          <div class="flex items-center gap-2">
            {entry.data.tags.map(tag => (
              <span class="px-2 py-1 bg-gray-100 text-gray-700 text-xs rounded-full">
                #{tag}
              </span>
            ))}
          </div>
        </div>
      </header>

      <!-- Content -->
      <div class="prose prose-lg max-w-none prose-headings:text-gray-900 prose-p:text-gray-700 prose-li:text-gray-700 prose-strong:text-gray-900 prose-code:text-accent">
        <Content />
      </div>

      <!-- CTA -->
      <div class="mt-16 bg-primary text-white rounded-2xl p-8 text-center">
        <h2 class="text-2xl font-bold mb-4">
          ¬øNecesit√°s ayuda con tu importaci√≥n?
        </h2>
        <p class="text-blue-100 mb-6 max-w-2xl mx-auto">
          Nuestro equipo de expertos de GIST POINT puede ayudarte con dudas espec√≠ficas 
          sobre tu operaci√≥n de importaci√≥n.
        </p>
        <div class="flex flex-col sm:flex-row gap-4 justify-center">
          <a href="/calculadora" class="btn bg-accent hover:bg-orange-600 text-white px-6 py-3 rounded-xl">
            üßÆ Usar Calculadora
          </a>
          <a href="/contacto" class="btn bg-white text-primary hover:bg-gray-100 px-6 py-3 rounded-xl">
            üìû Contactar Experto
          </a>
        </div>
      </div>

      <!-- Related Articles -->
      <div class="mt-16">
        <h3 class="text-2xl font-bold text-gray-900 mb-8 text-center">
          Art√≠culos Relacionados
        </h3>
        <div class="grid md:grid-cols-2 gap-6">
          <article class="bg-gray-50 rounded-xl p-6">
            <h4 class="text-lg font-bold text-gray-900 mb-2">
              C√≥digo NCM: Gu√≠a Completa
            </h4>
            <p class="text-gray-600 text-sm mb-4">
              Aprend√© a clasificar correctamente tus productos con el c√≥digo NCM y evit√° problemas con Aduana.
            </p>
            <a href="/blog/ncm-clasificacion-arancelaria" class="text-accent font-semibold hover:text-orange-600">
              Leer m√°s ‚Üí
            </a>
          </article>
          
          <article class="bg-gray-50 rounded-xl p-6">
            <h4 class="text-lg font-bold text-gray-900 mb-2">
              Costos Ocultos en Importaci√≥n
            </h4>
            <p class="text-gray-600 text-sm mb-4">
              M√°s all√° del arancel: conoc√© todos los gastos adicionales que impactan en el costo final.
            </p>
            <a href="/blog/costos-ocultos-importacion" class="text-accent font-semibold hover:text-orange-600">
              Leer m√°s ‚Üí
            </a>
          </article>
        </div>
      </div>
    </article>
  </main>
  <Footer />
</BaseLayout>
